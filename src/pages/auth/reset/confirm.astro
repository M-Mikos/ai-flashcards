---
import AuthLayout from "@/layouts/AuthLayout.astro";
import { ResetConfirmForm } from "@/components/auth/ResetConfirmForm";

export const prerender = false;

const token = Astro.url.searchParams.get("access_token") ?? Astro.url.searchParams.get("code");
---

<AuthLayout title="Potwierdź reset" heading="Nowe hasło">
  <div class="grid gap-6 lg:grid-cols-[1fr_minmax(0,0.45fr)]">
    <ResetConfirmForm client:load token={token} />
    <div
      class="hidden flex-col gap-3 rounded-2xl border border-border bg-card/80 p-5 text-sm text-muted-foreground shadow-lg shadow-black/5 dark:shadow-black/40 sm:flex"
    >
      <p class="text-xs uppercase tracking-[0.4em] text-muted-foreground">Bezpieczeństwo</p>
      <p>
        Hasło powinno być unikalne i nie używane wcześniej. Nasze wymagania zapewniają, że nowe hasło będzie odporne na
        podstawowe ataki słownikowe.
      </p>
      <p class="text-xs">Po zapisaniu hasła wrócimy do logowania, a sesja resetu zostanie automatycznie zamknięta.</p>
    </div>
  </div>
</AuthLayout>
